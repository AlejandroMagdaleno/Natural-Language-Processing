Multiple current and former officials tell CNN that those advisers -- including Chairman of the Joint Chiefs Gen. Mark Milley, leader of US Central Command Gen. Frank McKenzie and some State Department officials -- expressed concerns about what a full withdrawal might mean for the US counter-terror mission. They also expressed concern about the security of US diplomats based there.
"All relevant points of view were heard and all arguments were put on the table," said one senior administration official who spoke to CNN on condition of anonymity.
Going back to the previous administration, when President Donald Trump was also considering a withdrawal, US military leaders set a floor of some 2,500 US troops to provide counter-terror support and diplomatic security. While the final number of US forces who will remain in 
Afghanistan
 to protect the US diplomatic mission is still being debated, it is expected to fall below that figure. 
The deadline Biden has set for pulling all troops out
 -- September 11, the 20th anniversary of the attacks on the World Trade Center and Pentagon that launched the war -- is absolute, with no potential for extension based on worsening conditions on the ground.
"I know there are many who will loudly insist that diplomacy cannot succeed without a robust US military presence to stand as leverage," Biden said during remarks announcing his decision on Wednesday, addressing directly the concerns of some within his own administration. "We gave that argument a decade. It's never proved effective, not when we had 98,000 troops in Afghanistan, and not when we were down to a few thousand. Our diplomacy does not hinge on having boots in harm's way, US boots on the ground. We have to change that thinking."
"American troops shouldn't be used as a bargaining chip between warring parties in other countries," he went on. "That's nothing more than a recipe for keeping American troops in Afghanistan indefinitely."
Officials said after two decades of war, it was clear to the President that throwing more time and money at Afghanistan's problems wasn't going to work. The decision came after a months-long review that saw an unusually high rate of meetings among the administration's national security and military officials.
Months of meetings
Deliberations stretched longer than some US officials expected, even as Biden signaled repeatedly a May 1 deadline set by the previous administration was near-impossible to meet. Hoping to provide space for him to make an informed final decision that he wouldn't come to regret, officials sought to avoid pressuring a President known for blowing past deadlines. 
Warnings about the potential for the Taliban to regain power and for violence to increase pervaded the numerous meetings over the past few months, according to officials, though Biden continually chafed at suggestions US troops should remain in Afghanistan for much longer, according to people familiar with the matter, reminding his advisers that -- like his two predecessors -- he promised voters he would end the country's longest war, even if that meant going against the recommendations of his top generals.
Indeed, Biden's position on drawing down troops in Afghanistan is long-held, dating to his time as vice president. In often heated meetings in the Situation Room a decade ago, Biden grilled military leaders at the time about their plans for surging troops in the country, a decision he ardently argued against. Biden delivered his assessment in memo form to Obama, faxed to the White House from his Thanksgiving vacation on Nantucket. In private meetings and asides, he made his case.
"Listen to me, boss," Biden told Obama, according to Obama's recent memoir recounting their conversations. "Maybe I've been around this town for too long, but one thing I know is when these generals are trying to box in a new president." 
According to the former President's account, Biden brought his face a few inches from Obama's and stage-whispered: "Don't let them jam you."
But Obama surged troops anyway before eventually beginning a drawdown.
Biden's experience â and the failure of his two predecessors to end the war, as they promised to do â left him more convinced that further extending the conflict would do little to solve Afghanistan's problems.
Starting in February, officials undertook a review of "genuine, realistic options" for Afghanistan, according to an official, mindful of Biden's instructions not to "sugarcoat" the likely outcomes. Heavy consultations between Cabinet members and foreign partners ensued.
Among those advocating against a withdrawal, Milley had been among the most ardent, suggesting earlier in the deliberations that pulling American troops from Afghanistan could cause the government in Kabul to collapse and prompt backsliding in women's rights, according to people familiar with the conversations
One US official said Biden "did not let himself get boxed in by the military," echoing what sources have previously told CNN about concerns raised by defense officials during closed-door deliberations leading up to the decision.
A senior military official said now that Biden's decision has been made the Pentagon would begin the work of pulling troops out.
"Military leaders have been in touch with Secretary Austin and are fully on board with getting withdrawal going and getting it done," the official said. "They are clearly ready and willing to take on this mission."
On Wednesday, Defense Secretary Lloyd Austin was asked if uniformed military agreed on a withdrawal. 
"I won't speak for them," he said. "What I can tell you was that this was an inclusive process, and their voices were heard and their concerns taken into consideration as the President made his decision. But now that the decision has been made, I call upon them to lead their forces -- to lead their forces -- through this effort, through this transition, and knowing them all very well as I do, I have every confidence that they will in fact lead their force through this effort."
Effect on intelligence
The CIA, which has had a significant say in US decision-making in Afghanistan, has "staked out some clear positions" during recent deliberations, arguing in favor of continuing US involvement, according to a source familiar with the internal discussions. 
The CIA director, Bill Burns, warned a Senate Intelligence Committee hearing on Wednesday that if the United States withdraws from Afghanistan -- "whenever that time comes" -- the CIA's ability to collect intelligence and act on potential threats there will "diminish."
Neither al Qaeda or ISIS currently have the ability to strike the US homeland, Burns said, but "it is clear that our ability to keep that threat in Afghanistan in check from either al Qaeda or ISIS in Afghanistan has benefited greatly from the presence of US and coalition militaries on the ground and in the air, fueled by intelligence provided by the CIA and our other intelligence partners."
The CIA's operations in Afghanistan have long depended on the traditional military presence there and questions have swirled around what kind of intelligence and counterterrorism capabilities the United States might be able to retain in Afghanistan after September 11, as Biden has vowed to do.
"There is a significant risk once the US military and the coalition militaries withdraw, but we will work very hard at CIA and with all of our partners to try to provide the kind of strategic warning to others in the US government, that enables them and us to address that threat if it starts to materialize," Burns said.
The White House acknowledged on Wednesday that some of Biden's military and national security advisers disagreed on the path forward in Afghanistan, but Biden ultimately determined there was nothing a sustained US troop presence there could do to solve the country's problems.
"The President welcomed the advice, welcomed at times disagreement, about what the appropriate path forward should be," press secretary Jen Psaki told reporters. 
"I will leave it to them to speak to their viewpoints," she said of military officials when asked whether Biden overruled their advice to leave some troops behind. "The President asked for a review. He asked for that review not to be sugarcoated. He wanted to hear different points of views. He welcomed debate. And ultimately he made the decision that because the terrorist threat has evolved."
Hard decisions to come
For the State Department, the withdrawal raises many urgent questions, particularly over how the US will ensure protection of its diplomatic presence in Afghanistan including its embassy in Kabul. 
Secretary of State Tony Blinken himself, whose relationship with Biden extends for decades, knew exactly where Biden was on the issue. Earlier this month, when asked if Biden had made a mistake in saying that he could not see US troops in Afghanistan by the end of year Blinken did not skip a beat.
"It's a totally accurate reflection of his thinking. I think that's not a mistake at all," he told the Washington Post.
Blinken himself advocated for an approach that would lend the best odds to diplomacy. Blinken believed that if the US went beyond May 1 they would find themselves back at war with the Taliban.
According to sources familiar with the matter, there is still no final decision as to how many troops will stay to protect the embassy, and it's premature to speculate about what the military footprint to protect the diplomatic presence in Kabul will look like since the US doesn't know yet how the Taliban will respond.  
Other decisions also have yet to be made about the Kabul embassy. For example, the embassy does not have its own medical unit because it is reliant on the military's medical personnel, explained one State Department official, so it will have to stand up an in-house office whose details are still being worked out. 
The US embassy will do all that it can to stay open in some capacity, said officials familiar with the discussions, in part because it was an extremely expensive investment for the US government.
Despite the clear mission to maintain and bolster America's diplomatic presence in Afghanistan, diplomats are worried the Taliban could carry out a bloody, aggressive attack on Kabul that could force the mission to shrink or potentially close. 
Many State Department officials say they believe after the US withdraws in September the violence could escalate so drastically that the US may have to close the embassy. Others say the embassy will do all that it can to stay open in some capacity, in part because it was an extremely expensive investment for the US government.
Diplomats are privately predicting an embassy drawdown within the next few years, given intelligence reports that the Taliban is likely to reassert control of the country if there is no political agreement between the Afghan government and the Taliban before the US troops leave.
"Those of us who were there at the beginning knew the day would come where we would have to detach the US military from Afghanistan," said Michael Evanoff, the former assistant secretary for diplomatic security. "What we can hope is that if Taliban rule eventually takes over the country, that Kabul will not fall violently like Saigon did in April 1975. However, I have a sinking feeling that within two years US diplomats could be scrambling from the roof of our embassy onto helicopter skids pulling us out of harm's way. I hope to God not, but it is definitely not out of the realm of possibility when we pull our military out."
